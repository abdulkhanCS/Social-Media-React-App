{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import CollegeGroup from\"./collegeGroup.js\";import CollegeSearch from\"./collegeSearch.js\";import\"../componentStyles/homepage.css\";import{Link,useParams}from\"react-router-dom\";import Axios from\"axios\";var home=/*#__PURE__*/function(_React$Component){_inherits(home,_React$Component);var _super=_createSuper(home);function home(props){var _this;_classCallCheck(this,home);_this=_super.call(this);_this.state={showSearch:false,userId:\"\",userFirstName:\"\",userLastName:\"\",userAdmin:false,userEmail:\"\",userCollegeGroups:[],username:\"\"};_this.pushToForum.bind(_assertThisInitialized(_this));return _this;}_createClass(home,[{key:\"componentDidMount\",value:function componentDidMount(){var getData=this.getUserData.bind(this);getData();}},{key:\"showSearchComponent\",value:function showSearchComponent(){this.setState({showSearch:true});}},{key:\"collapseSearch\",value:function collapseSearch(e){console.log(e.target.id);if(this.state.showSearch&&e.target.id==\"search-wrap\"){//User clicked on surrounding of search to collapse\nthis.setState({showSearch:false});}}},{key:\"collapseSearchAndAdd\",value:function collapseSearchAndAdd(chosenCollege){this.setState(function(prevState){return{userCollegeGroups:[].concat(_toConsumableArray(prevState.userCollegeGroups),[chosenCollege])};});this.setState({showSearch:false});}},{key:\"getUserData\",value:function getUserData(){var _this2=this;console.log(\"getting \");Axios.get(\"/homepage\",{params:{username:this.props.location.state.thisUsername}}).then(function(res){var userData=res.data;_this2.setState(function(prevState){return{userId:userData._id,userFirstName:userData.firstName,userLastName:userData.lastName,userEmail:userData.email,userAdmin:userData.admin,userCollegeGroups:userData.collegeGroups};});console.log(\"user data retrieved\");}).catch(function(err){console.log(err);});}},{key:\"pushToForum\",value:function(){var _pushToForum=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this3=this;var collegeName;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:collegeName=e.target.textContent;fetch(\"http://raw.githubusercontent.com/Hipo/university-domains-list/master/world_universities_and_domains.json\").then(function(res){return res.json();}).then(function(collegeInfo){var foundCollege;collegeInfo.map(function(college){if(college.name==collegeName){foundCollege=college;}});return foundCollege;}).then(function(foundCollege){console.log(\"THIS IS FOUND COLLEGE \",foundCollege);_this3.props.history.push({pathname:'/forum',state:{thisUserID:_this3.state.userId,college:foundCollege,username:_this3.props.location.state.thisUsername,userFirstName:_this3.state.userFirstName,userLastName:_this3.state.userLastName,userEmail:_this3.state.userEmail}});});case 2:case\"end\":return _context.stop();}}},_callee);}));function pushToForum(_x){return _pushToForum.apply(this,arguments);}return pushToForum;}()},{key:\"render\",value:function render(){var savedColleges=this.state.userCollegeGroups.map(function(college){return/*#__PURE__*/React.createElement(CollegeGroup,{key:college.name,name:college.name});});return/*#__PURE__*/React.createElement(\"div\",null,this.state.showSearch?/*#__PURE__*/React.createElement(CollegeSearch,{dismiss:this.collapseSearch.bind(this),dismissOnSubmit:this.collapseSearchAndAdd.bind(this),thisUserId:this.state.userId}):null,/*#__PURE__*/React.createElement(\"div\",{id:\"homepage-div\"},/*#__PURE__*/React.createElement(\"div\",{id:\"college-groups\",onClick:this.pushToForum.bind(this)},savedColleges),/*#__PURE__*/React.createElement(\"button\",{id:\"add-college-group\",onClick:this.showSearchComponent.bind(this)},\"Add\"),/*#__PURE__*/React.createElement(\"div\",{id:\"profile-section\"},/*#__PURE__*/React.createElement(\"img\",{id:\"profile-picture\",src:\"https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/v246-tent-33-business_2.jpg?bg=transparent&con=3&cs=srgb&dpr=1&fm=jpg&ixlib=php-3.1.0&q=65&usm=15&vib=3&w=800&s=19ed9a41550e368fefefc653763e9497\"}),/*#__PURE__*/React.createElement(\"h2\",{id:\"profile-name\"},this.state.userFirstName,\"'s homepage\")),/*#__PURE__*/React.createElement(\"div\",{id:\"homepage-menu\"})));}}]);return home;}(React.Component);export{home as default};","map":{"version":3,"sources":["C:/Users/akhan/Documents/social-media-app/client/src/components/homepage.js"],"names":["React","CollegeGroup","CollegeSearch","Link","useParams","Axios","home","props","state","showSearch","userId","userFirstName","userLastName","userAdmin","userEmail","userCollegeGroups","username","pushToForum","bind","getData","getUserData","setState","e","console","log","target","id","chosenCollege","prevState","get","params","location","thisUsername","then","res","userData","data","_id","firstName","lastName","email","admin","collegeGroups","catch","err","collegeName","textContent","fetch","json","collegeInfo","foundCollege","map","college","name","history","push","pathname","thisUserID","savedColleges","collapseSearch","collapseSearchAndAdd","showSearchComponent","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport CollegeGroup from \"./collegeGroup.js\"\r\nimport CollegeSearch from \"./collegeSearch.js\";\r\nimport \"../componentStyles/homepage.css\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport Axios from \"axios\";\r\n\r\nexport default class home extends React.Component {\r\n  constructor(props) {\r\n    super();\r\n\r\n    this.state = {\r\n      showSearch: false,\r\n      userId: \"\",\r\n      userFirstName: \"\",\r\n      userLastName: \"\",\r\n      userAdmin: false,\r\n      userEmail: \"\",\r\n      userCollegeGroups: [],\r\n      username: \"\"\r\n    };\r\n    this.pushToForum.bind(this)\r\n  }\r\n\r\n  componentDidMount(){\r\n    const getData = this.getUserData.bind(this)\r\n    getData()\r\n  }\r\n\r\n  showSearchComponent() {\r\n    this.setState({ showSearch: true });\r\n  }\r\n\r\n  collapseSearch(e) {\r\n    console.log(e.target.id);\r\n    if (this.state.showSearch && e.target.id == \"search-wrap\") { //User clicked on surrounding of search to collapse\r\n      this.setState({ showSearch: false });\r\n    }\r\n  }\r\n\r\n  collapseSearchAndAdd(chosenCollege) {\r\n    this.setState(prevState => ({\r\n      userCollegeGroups: [...prevState.userCollegeGroups, chosenCollege]\r\n    }))\r\n     this.setState({ showSearch: false,  });\r\n  }\r\n\r\n  getUserData() {\r\n    console.log(\"getting \");\r\n    Axios.get(\"/homepage\", {\r\n      params: {\r\n        username: this.props.location.state.thisUsername,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        const userData = res.data;\r\n        this.setState((prevState) => ({\r\n          userId : userData._id,\r\n          userFirstName: userData.firstName,\r\n          userLastName: userData.lastName,\r\n          userEmail: userData.email,\r\n          userAdmin: userData.admin,\r\n          userCollegeGroups: userData.collegeGroups,\r\n        }));\r\n        console.log(\"user data retrieved\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n  \r\n  async pushToForum(e){\r\n    const collegeName = e.target.textContent\r\n    fetch(\"http://raw.githubusercontent.com/Hipo/university-domains-list/master/world_universities_and_domains.json\")\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((collegeInfo) => {\r\n        var foundCollege;\r\n        collegeInfo.map(function(college){\r\n          if(college.name == collegeName){\r\n            foundCollege = college;\r\n          }\r\n        })\r\n        return foundCollege\r\n      })\r\n      .then((foundCollege) =>{\r\n        console.log(\"THIS IS FOUND COLLEGE \", foundCollege)\r\n        this.props.history.push({\r\n          pathname: '/forum',\r\n          state: { thisUserID: this.state.userId, college: foundCollege, username: this.props.location.state.thisUsername, userFirstName: this.state.userFirstName, userLastName: this.state.userLastName, userEmail: this.state.userEmail }\r\n          }); \r\n      })    \r\n  }\r\n\r\n  render() {\r\n    const savedColleges = this.state.userCollegeGroups.map(function(college){\r\n      return( \r\n           <CollegeGroup key = {college.name} name={college.name}/>\r\n             )\r\n    });\r\n    return (\r\n      <div>\r\n        {this.state.showSearch ? (\r\n          <CollegeSearch dismiss={this.collapseSearch.bind(this)} dismissOnSubmit={this.collapseSearchAndAdd.bind(this)} thisUserId = {this.state.userId}/>\r\n        ) : null}\r\n        <div id=\"homepage-div\">\r\n          <div id=\"college-groups\" onClick = {this.pushToForum.bind(this)}>\r\n              {savedColleges}\r\n            {/* <img\r\n              className=\"no-colleges\"\r\n              id=\"no-colleges-image\"\r\n              src=\"https://i.imgur.com/ozNNNIK.png\"\r\n            />\r\n            <h4 className=\"no-colleges\" id=\"no-colleges-text\">\r\n              You have no groups! Click the add button to add groups\r\n            </h4> */}         \r\n          </div>\r\n          <button\r\n            id=\"add-college-group\"\r\n            onClick={this.showSearchComponent.bind(this)}\r\n          >\r\n            Add\r\n          </button>\r\n          <div id=\"profile-section\">\r\n            <img\r\n              id=\"profile-picture\"\r\n              src=\"https://img.rawpixel.com/s3fs-private/rawpixel_images/website_content/v246-tent-33-business_2.jpg?bg=transparent&con=3&cs=srgb&dpr=1&fm=jpg&ixlib=php-3.1.0&q=65&usm=15&vib=3&w=800&s=19ed9a41550e368fefefc653763e9497\"\r\n            />\r\n            <h2 id=\"profile-name\">{this.state.userFirstName}'s homepage</h2>\r\n          </div>\r\n          <div id=\"homepage-menu\"></div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}