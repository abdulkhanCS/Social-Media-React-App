{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\akhan\\\\Documents\\\\social-media-app\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from\"react\";import\"../componentStyles/loginScreen.css\";import{Link,useParams}from\"react-router-dom\";import Redirect from\"react-router\";import Axios from\"axios\";var loginScreen=/*#__PURE__*/function(_React$Component){_inherits(loginScreen,_React$Component);var _super=_createSuper(loginScreen);function loginScreen(){var _this;_classCallCheck(this,loginScreen);_this=_super.call(this);_this.state={username:\"\",password:\"\",data:null,loggedIn:false};_this.failedToLogin.bind(_assertThisInitialized(_this));return _this;}_createClass(loginScreen,[{key:\"assign\",value:function assign(e){if(e.target.name===\"username\"){this.setState({username:e.target.value});}if(e.target.name===\"password\"){this.setState({password:e.target.value});}}},{key:\"onChange\",value:function onChange(e){this.setState(_defineProperty({},e.target.name,e.target.value));}},{key:\"onSubmit\",value:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var _this2=this;var thisUsername;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:thisUsername=this.state.username;Axios.get(\"/user/\",{params:{username:thisUsername}}).then(function(response){console.log(response.status);_this2.setState({data:response.data[0]});if(_this2.state.data!=null){// user name found\nvar bcrypt=require(\"bcryptjs\");console.log(_this2.state.password,\" + \",_this2.state.data.password);return new Promise(function(resolve,reject){bcrypt.compare(_this2.state.password,_this2.state.data.password,function(err,result){if(err)reject(err);resolve(result);});}).then(function(result){if(result){//logged in \n_this2.setState({loggedIn:true});var loginCircle=document.getElementById(\"login\");loginCircle.setAttribute(\"style\",\"border: solid green\");setTimeout(function(){_this2.props.history.push({pathname:'/homepage',state:{thisUsername:_this2.state.username,thisUser:_this2.state.data}});},400);}else{_this2.failedToLogin();}});}else{console.log(\"No matching user found\");}}).catch(function(err){console.log(err);});case 2:case\"end\":return _context.stop();}}},_callee,this);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()},{key:\"isLoggedIn\",value:function isLoggedIn(){return this.state.loggedIn;}},{key:\"failedToLogin\",value:function failedToLogin(){var loginCircle=document.getElementById(\"login\");loginCircle.setAttribute(\"style\",\"border: solid red\");}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{id:\"login-wrap\"},/*#__PURE__*/React.createElement(\"div\",{id:\"login\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",name:\"username\",id:\"username\",placeholder:\"Username\",className:\"credentials\",onChange:this.assign.bind(this)}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",name:\"password\",id:\"password\",placeholder:\"Password\",className:\"credentials\",onChange:this.assign.bind(this)}),/*#__PURE__*/React.createElement(\"div\",{id:\"buttons\"},/*#__PURE__*/React.createElement(\"div\",{id:\"login-button\",onClick:this.onSubmit.bind(this)},\"Log in\"),/*#__PURE__*/React.createElement(Link,{to:\"/user/register\",id:\"register-button\"},\"Register\"))));}}]);return loginScreen;}(React.Component);export{loginScreen as default};","map":{"version":3,"sources":["C:/Users/akhan/Documents/social-media-app/client/src/components/loginScreen.js"],"names":["React","Link","useParams","Redirect","Axios","loginScreen","state","username","password","data","loggedIn","failedToLogin","bind","e","target","name","setState","value","thisUsername","get","params","then","response","console","log","status","bcrypt","require","Promise","resolve","reject","compare","err","result","loginCircle","document","getElementById","setAttribute","setTimeout","props","history","push","pathname","thisUser","catch","assign","onSubmit","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"../componentStyles/loginScreen.css\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport Redirect from \"react-router\";\r\nimport Axios from \"axios\";\r\n\r\nexport default class loginScreen extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\",\r\n      data: null,\r\n      loggedIn: false\r\n    };\r\n    this.failedToLogin.bind(this);\r\n  }\r\n\r\n  assign(e) {\r\n    if (e.target.name === \"username\") {\r\n      this.setState({ username: e.target.value });\r\n    }\r\n    if (e.target.name === \"password\") {\r\n      this.setState({ password: e.target.value });\r\n    }\r\n  }\r\n\r\n  onChange(e) {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n\r\n  async onSubmit(e) {\r\n    const thisUsername = this.state.username;\r\n    Axios.get(\"/user/\", {\r\n      params: {\r\n        username: thisUsername\r\n      },\r\n    }).then((response) => {\r\n      console.log(response.status);\r\n      this.setState({data: response.data[0]});\r\n      if (this.state.data != null) { // user name found\r\n        const bcrypt = require(\"bcryptjs\");\r\n        console.log(this.state.password, \" + \", this.state.data.password);\r\n        return new Promise((resolve, reject) => {\r\n          bcrypt.compare(\r\n            this.state.password,\r\n            this.state.data.password,\r\n            function (err, result) {\r\n              if (err) reject(err);\r\n              resolve(result);\r\n            }\r\n          );\r\n        }).then((result) => {\r\n          if (result) { //logged in \r\n            this.setState({loggedIn: true})\r\n            const loginCircle = document.getElementById(\"login\");\r\n            loginCircle.setAttribute(\"style\", \"border: solid green\");\r\n            setTimeout(() => {\r\n              this.props.history.push({\r\n              pathname: '/homepage',\r\n              state: { thisUsername: this.state.username, thisUser: this.state.data }\r\n              }); \r\n            }, 400);\r\n          } else {\r\n            this.failedToLogin(); \r\n          }\r\n        });\r\n      } else {\r\n        console.log(\"No matching user found\");\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err)\r\n    })\r\n  }\r\n\r\n  isLoggedIn(){\r\n    return this.state.loggedIn\r\n  }\r\n\r\n  failedToLogin() {\r\n    const loginCircle = document.getElementById(\"login\");\r\n    loginCircle.setAttribute(\"style\", \"border: solid red\");\r\n  }\r\n\r\n  render() {\r\n    return (\r\n     <div id = \"login-wrap\">\r\n      <div id=\"login\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"username\"\r\n          id=\"username\"\r\n          placeholder=\"Username\"\r\n          className=\"credentials\"\r\n          onChange={this.assign.bind(this)}\r\n        ></input>\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          id=\"password\"\r\n          placeholder=\"Password\"\r\n          className=\"credentials\"\r\n          onChange={this.assign.bind(this)}\r\n        ></input>\r\n        <div id=\"buttons\">\r\n          <div id=\"login-button\" onClick={this.onSubmit.bind(this)}>\r\n            Log in\r\n          </div>\r\n          <Link to=\"/user/register\" id=\"register-button\">\r\n            Register\r\n          </Link>\r\n        </div>\r\n      </div>\r\n      </div> \r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}